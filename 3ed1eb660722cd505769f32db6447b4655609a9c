{
  "comments": [
    {
      "key": {
        "uuid": "80a673c2_3198dd11",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-10-23T01:49:09Z",
      "side": 1,
      "message": "Is it really \"systemd-networkd(5)\" for you? It\u0027s systemd.network(5) on my system for the configuration options.",
      "range": {
        "startLine": 13,
        "startChar": 26,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea5adeb4_62d6721a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000278
      },
      "writtenOn": "2021-11-08T16:12:31Z",
      "side": 1,
      "message": "No, but the repo is called that, and my mind/fingers are trained to using that syntax. I will fix that.",
      "parentUuid": "80a673c2_3198dd11",
      "range": {
        "startLine": 13,
        "startChar": 26,
        "endLine": 13,
        "endChar": 42
      },
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9b24a42_5962ae27",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-10-23T01:49:09Z",
      "side": 1,
      "message": "I think \"may\" is the key word. We might get an RA which does not indicate DHCPv6. Or I suppose isn\u0027t it possible we may not get an RA at all even if we accept them? So setting IPv6AcceptRA does not mean that we\u0027ll use DHCPv6.",
      "range": {
        "startLine": 21,
        "startChar": 7,
        "endLine": 21,
        "endChar": 10
      },
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1ad8112_879cc2be",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000278
      },
      "writtenOn": "2021-11-08T16:12:31Z",
      "side": 1,
      "message": "I used the word \"may\". The systemd.networkd(5) states that it \"is still active\". Real world testing also shows that DHCPv6 is, in fact, active.",
      "parentUuid": "b9b24a42_5962ae27",
      "range": {
        "startLine": 21,
        "startChar": 7,
        "endLine": 21,
        "endChar": 10
      },
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa97867f_47379d8a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-11-18T10:39:39Z",
      "side": 1,
      "message": "Jonathan, Ipv6acceptRA is for accepting any RA messages(SLAAC configuration.)\n\nIn RA message, if M(managed) flag is set: Then BMC should discard the prefix given by the autoconf router(radvd) and send the solicit message to DHCP server and get the IP from the DHCP server.\n\nRA is needed in both the cases(Stateful/Stateless) either you get the IP from DHCP server or not as it depends on the RA payload.\n\nAre your proposal is to treat both stateless and stateful dhcp should be treated as DHCP.",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 21,
        "endChar": 58
      },
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dda1cd28_8f9a9170",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-11-18T10:43:55Z",
      "side": 1,
      "message": "Can you share your radvd.conf and dhcpv6d.conf? I was trying to test the stateful but BMC is not sending the DHCPv6 solicit messages even if the RA message contains the M flag as true.",
      "parentUuid": "fa97867f_47379d8a",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 21,
        "endChar": 58
      },
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b247515_31c6fe96",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1000278
      },
      "writtenOn": "2021-11-30T19:20:46Z",
      "side": 1,
      "message": "Ratan,\nI don\u0027t, as yet, understand how Stateless/Stateful are supposed to operate. Right now the OBMC really only performs stateful DHCPv6. \n\nMy radvd.conf:\ninterface enp3s0 {\n        AdvSendAdvert on;\n        AdvManagedFlag on;\n        MinRtrAdvInterval 3;\n        MaxRtrAdvInterval 10;\n        prefix 2112:1020:1::/64 {\n                AdvOnLink on;\n                AdvAutonomous off;\n                AdvRouterAddr on;\n        };\n\n\nMost of my dhcpdv6.conf file is an unmodified isc-dhcpv6-server as created on my Ubuntu 20.04 system. I left the lease times alone. I do not define any name server/domain search lists. The business end of address assignment is done by the lines below:\nhost otherclient {                 \n        # This host entry is hopefully matched if the client supplies a DUID-LL              \n        # or DUID-LLT containing this MAC address.                                           \n        host-identifier option                \n                dhcp6.client-id 00:02:00:00:ab:11:4d:f5:b2:75:58:2a:25:37;                   \n                fixed-address6 2112:1020:1::3;                                               \n}\nsubnet6 2112:1020:1::/64 {                                                                                                                                                                \n        range6 2112:1020:1::2 2112:1020:1::3;                                                \n}\n\nI think this config is technically in error, as the \"host otherhost\" should not have a fixed address inside the dynamically assigned subnet6 range. I also need to change this to a fdxx local address assignment space.",
      "parentUuid": "dda1cd28_8f9a9170",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 21,
        "endChar": 58
      },
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa389296_30638bc2",
        "filename": "src/ethernet_interface.cpp",
        "patchSetId": 1
      },
      "lineNbr": 589,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-10-21T21:37:39Z",
      "side": 1,
      "message": "No, it implies the other way around. You can\u0027t do DHCPv6 without parsing RAs, but you can parse RAs and use the information without DHCPv6.",
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f1d80be_66efa3ac",
        "filename": "src/ethernet_interface.cpp",
        "patchSetId": 1
      },
      "lineNbr": 589,
      "author": {
        "id": 1000278
      },
      "writtenOn": "2021-10-22T15:01:21Z",
      "side": 1,
      "message": "William,\nHow do you reconcile that statement against this directly from systemd-network:\n\u0027DHCP\u003d\n.....\nNote that DHCPv6 will by default be triggered by Router\nAdvertisement, if that is enabled, regardless of this parameter.\u0027\n\nIf I set DHCP\u003dv4 or DHCP\u003dnone, systemd-networkd still performs RA, and assigns a DHCPv6 address. So when RA is enabled, \u0027none/ipv4\u0027 is ignored by systemd-networkd.",
      "parentUuid": "fa389296_30638bc2",
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "712cab87_91f45dbb",
        "filename": "src/ethernet_interface.cpp",
        "patchSetId": 1
      },
      "lineNbr": 589,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-10-23T23:37:30Z",
      "side": 1,
      "message": "It looks like it would make more sense to just set the value of `IPv6AcceptRA.DHCPv6Client` based on the value of DHCPv6 enablement. This would be less surprising than enabling DHCP when the user enables RA.",
      "parentUuid": "1f1d80be_66efa3ac",
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08cec233_33e17ebf",
        "filename": "src/ethernet_interface.cpp",
        "patchSetId": 1
      },
      "lineNbr": 589,
      "author": {
        "id": 1000278
      },
      "writtenOn": "2021-11-08T16:36:22Z",
      "side": 1,
      "message": "I began to look at this William. Fundamentally the issue is still the same. The IPMI API does not have an independent way of controlling the RA vs the DHCP entry. That issue has been discussed internally. The expectation is that an ad-hoc solution to work around the IPMI API limitation may not be accepted upstream. I\u0027d like to get guidance from the maintainers concerning this implementation.\n\nIPMI can directly control enabling RA.\nIPMI can directly control enabling DHCP. It does not have independent control of IPv4 vs IPv6.\n\nThis lack of control leaves odd corner cases to handle implicitly. If I follow your suggestion and use IPMI to enable RA, yet leave DHCPv6Client \u003d\u003d false, then IPv6 addrs don\u0027t get assigned. What mechanism should be used to assign DHCPv6Client \u003d\u003d true? If such a mechanism existed in IPMI now, we could always assign DHCPv6Client \u003d\u003d false, and then control the primary DHCP\u003d entry per the rules that the existing code follows now.\n\nI see the following options:\n1. Leave the phosphor-network handling as-is prior to this commit, and don\u0027t support IPMI correctly announcing DHCPv6 state.\n2. Implement what I have submitted, and have an ad-hoc solution to the problem.\n3. Create an OEM extension to SetLan, GetLan that controls DHCPv6 explicitly. Which is basically an ad-hoc solution, just in a different repo (i.e. phoshpor-ipmi-host, or intel-ipmi-oem).",
      "parentUuid": "712cab87_91f45dbb",
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10e06538_1601aae0",
        "filename": "src/ethernet_interface.cpp",
        "patchSetId": 1
      },
      "lineNbr": 589,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-11-10T10:30:08Z",
      "side": 1,
      "message": "My opinion would be to keep these independent options at the dbus level, so that other client can configure them independently but have IPMI set them both to the same value when \"IPv6 Router Address Configuration Control\" is set. It\u0027s pretty clear in the IPMI spec that they expect DHCPv6 to be a possible option when dynamic router control is enabled. Having it disabled should then disable DHCPv6 too.\n\nIt would be really nice to decouple DHCPv6 from the DHCPv4 settings in the lan config.",
      "parentUuid": "08cec233_33e17ebf",
      "revId": "3ed1eb660722cd505769f32db6447b4655609a9c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}